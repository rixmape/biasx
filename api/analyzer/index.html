<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Analyzer - BiasX Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Analyzer";
        var mkdocs_page_input_path = "api/analyzer.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> BiasX Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../getting_started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../configuration/">Configuration</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Analyzer</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#biasx.analyzer.BiasAnalyzer">BiasAnalyzer</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#biasx.analyzer.BiasAnalyzer.__init__">__init__</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#biasx.analyzer.BiasAnalyzer.analyze">analyze</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#biasx.analyzer.BiasAnalyzer.analyze_batch">analyze_batch</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#biasx.analyzer.BiasAnalyzer.from_file">from_file</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../datasets/">Datasets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../explainers/">Explainers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../models/">Models</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../calculators/">Calculators</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../types/">Types</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../utils/">Utilities</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">BiasX Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API Reference</li>
      <li class="breadcrumb-item active">Analyzer</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="bias-analyzer">Bias Analyzer</h1>
<p>This module contains the main orchestrator for the bias analysis pipeline.</p>
<hr />


<div class="doc doc-object doc-class">



<h2 id="biasx.analyzer.BiasAnalyzer" class="doc doc-heading">
            <code>biasx.analyzer.BiasAnalyzer</code>


</h2>


    <div class="doc doc-contents first">


        <p>Orchestrates the end-to-end facial recognition bias analysis pipeline.</p>
<p>This class coordinates the process of loading data, running model inference,
generating visual explanations (activation maps and facial landmarks),
and calculating various bias metrics. It integrates functionalities from
Dataset, Model, Explainer, and Calculator components.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>config</code></b>
                  (<code><span title="biasx.config.Config">Config</span></code>)
              –
              <div class="doc-md-description">
                <p>The configuration object holding settings for all
components (dataset, model, explainer, calculator).</p>
              </div>
            </li>
            <li>
              <b><code>model</code></b>
                  (<code><a class="autorefs autorefs-internal" title="biasx.models.Model" href="../models/#biasx.models.Model">Model</a></code>)
              –
              <div class="doc-md-description">
                <p>An instance of the Model class for performing inference.</p>
              </div>
            </li>
            <li>
              <b><code>dataset</code></b>
                  (<code><a class="autorefs autorefs-internal" title="biasx.datasets.Dataset" href="../datasets/#biasx.datasets.Dataset">Dataset</a></code>)
              –
              <div class="doc-md-description">
                <p>An instance of the Dataset class for loading and
preprocessing data.</p>
              </div>
            </li>
            <li>
              <b><code>explainer</code></b>
                  (<code><a class="autorefs autorefs-internal" title="biasx.explainers.Explainer" href="../explainers/#biasx.explainers.Explainer">Explainer</a></code>)
              –
              <div class="doc-md-description">
                <p>An instance of the Explainer class for generating
visual explanations.</p>
              </div>
            </li>
            <li>
              <b><code>calculator</code></b>
                  (<code><a class="autorefs autorefs-internal" title="biasx.calculators.Calculator" href="../calculators/#biasx.calculators.Calculator">Calculator</a></code>)
              –
              <div class="doc-md-description">
                <p>An instance of the Calculator class for
computing bias metrics.</p>
              </div>
            </li>
            <li>
              <b><code>batch_size</code></b>
                  (<code><span title="int">int</span></code>)
              –
              <div class="doc-md-description">
                <p>The batch size used for processing data during
analysis, potentially overriding batch sizes specified in
component configurations for the analysis loop itself.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using a configuration dictionary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;utkface&quot;</span><span class="p">,</span> <span class="s2">&quot;max_samples&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/model.h5&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s2">&quot;explainer&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;cam_method&quot;</span><span class="p">:</span> <span class="s2">&quot;gradcam&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s2">&quot;calculator&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;precision&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s2">&quot;analyzer&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">16</span><span class="p">}</span>
<span class="gp">... </span><span class="p">}</span> <span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">BiasAnalyzer</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">disparity_scores</span><span class="p">)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using a configuration file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">BiasAnalyzer</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span> <span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BiasX Score: </span><span class="si">{</span><span class="n">results</span><span class="o">.</span><span class="n">disparity_scores</span><span class="o">.</span><span class="n">biasx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>










  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="biasx.analyzer.BiasAnalyzer.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initializes the BiasAnalyzer and its components.</p>
<p>Sets up the Dataset, Model, Explainer, and Calculator based on the
provided configuration.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>config</code></b>
                  (<code><span title="typing.Union">Union</span>[<span title="biasx.config.Config">Config</span>, <span title="typing.Dict">Dict</span>, None]</code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <p>A
configuration object (Config) or dictionary containing
settings for the analyzer and its sub-components (Dataset,
Model, Explainer, Calculator). If None, default
configurations might be used or an error raised depending
on the Config setup. Defaults to None.</p>
              </div>
            </li>
            <li>
              <b><code>batch_size</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>32</code>
)
              –
              <div class="doc-md-description">
                <p>The batch size to use when iterating
through the dataset during the <code>analyze</code> method. This primarily
controls the batching within the analyzer's loop, distinct
from potential batch sizes used internally by the model or
explainer if configured differently. Defaults to 32.</p>
              </div>
            </li>
            <li>
              <b><code>**kwargs</code></b>
              –
              <div class="doc-md-description">
                <p>Additional keyword arguments, potentially used by the
configurable decorator or passed down during component
initialization if the Config structure supports it.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="biasx.analyzer.BiasAnalyzer.analyze" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">analyze</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Runs the full bias analysis pipeline on the configured dataset.</p>
<p>This method iterates through the entire dataset provided by the
Dataset component, processing images in batches using <code>analyze_batch</code>.
It aggregates all the generated Explanation objects and then uses the
Calculator component to compute feature-level bias analyses and
overall disparity scores (like BiasX and Equalized Odds).</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><a class="autorefs autorefs-internal" title="biasx.types.AnalysisResult


  
      dataclass
  " href="../types/#biasx.types.AnalysisResult">AnalysisResult</a></code>
              –
              <div class="doc-md-description">
                <p>An AnalysisResult object containing:</p>
<ul>
<li><code>explanations</code>: A list of all Explanation objects generated for
each image in the dataset.</li>
<li><code>feature_analyses</code>: A dictionary mapping each FacialFeature to its
calculated FeatureAnalysis (bias score, per-gender probabilities).</li>
<li><code>disparity_scores</code>: A DisparityScores object containing overall
metrics like BiasX and Equalized Odds.</li>
</ul>
<p>Returns an empty AnalysisResult if the dataset yields no data or
no explanations could be generated.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<details class="note" open>
  <summary>Note</summary>
  <p>This method processes the <em>entire</em> dataset as configured in the
Dataset component (respecting <code>max_samples</code>, shuffling, etc.).
It can be computationally intensive depending on the dataset size
and model complexity. It uses an internal buffer to manage
memory usage during explanation aggregation.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="biasx.analyzer.BiasAnalyzer.analyze_batch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">analyze_batch</span><span class="p">(</span><span class="n">image_data_batch</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Analyzes a single batch of images through the pipeline.</p>
<p>This method takes a list of ImageData objects, runs model prediction,
generates explanations (activation maps, landmarks, labeled boxes),
and compiles the results into Explanation objects.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>image_data_batch</code></b>
                  (<code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="biasx.types.ImageData


  
      dataclass
  " href="../types/#biasx.types.ImageData">ImageData</a>]</code>)
              –
              <div class="doc-md-description">
                <p>A list of ImageData
objects, typically obtained from iterating over a Dataset
instance. Each ImageData object should contain at least
the preprocessed image (NumPy array) and the original PIL
image.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="biasx.types.Explanation


  
      dataclass
  " href="../types/#biasx.types.Explanation">Explanation</a>]</code>
              –
              <div class="doc-md-description">
                <p>A list of Explanation objects, one for each image in the input
batch. Each Explanation object contains the original image data,
prediction results (gender, confidence), activation map, activation
boxes (potentially labeled with facial features), and landmark
boxes. Returns an empty list if the input batch is empty.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="biasx.analyzer.BiasAnalyzer.from_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_file</span><span class="p">(</span><span class="n">config_file_path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Creates a BiasAnalyzer instance from a configuration file.</p>
<p>This factory method provides a convenient way to initialize the
analyzer using an external configuration file (e.g., YAML, JSON)
that defines the settings for all components.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>config_file_path</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <p>The path to the configuration file. The file
format should be supported by the underlying Config class's
<code>from_file</code> method.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
                  <code><a class="autorefs autorefs-internal" title="biasx.analyzer.BiasAnalyzer" href="#biasx.analyzer.BiasAnalyzer">BiasAnalyzer</a></code>
              –
              <div class="doc-md-description">
                <p>A new instance of BiasAnalyzer configured according to the file.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">BiasAnalyzer</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;analysis_config.yaml&#39;</span><span class="p">)</span> <span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">analyze</span><span class="p">()</span>
</code></pre></div>


    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../configuration/" class="btn btn-neutral float-left" title="Configuration"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../datasets/" class="btn btn-neutral float-right" title="Datasets">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../configuration/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../datasets/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
